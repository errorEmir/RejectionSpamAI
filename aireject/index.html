<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
        <html lang="tr">
        <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Gmail Entegreli Ret MesajÄ± Filtreleme</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <div class="header">
        <h1>ğŸ“§ Gmail Entegreli Ret MesajÄ± Filtreleme</h1>
        <p>Gmail hesabÄ±nÄ±zdaki iÅŸ ret mesajlarÄ±nÄ± otomatik olarak tespit edin ve yÃ¶netin</p>
    </div>

    <div class="main-content">
        <!-- Gmail Kimlik DoÄŸrulama -->
        <div class="section auth-section">
            <h2>ğŸ” Gmail BaÄŸlantÄ±sÄ±</h2>

            <div id="authStatus" class="auth-status disconnected">
                <div>ğŸ”´ Gmail hesabÄ±na baÄŸlÄ± deÄŸil</div>
                <small>E-postalarÄ±nÄ±zÄ± analiz etmek iÃ§in Gmail hesabÄ±nÄ±za baÄŸlanÄ±n</small>
            </div>

            <button id="authorizeBtn" class="btn btn-success" onclick="handleAuthClick()">
                Gmail'e BaÄŸlan
            </button>

            <button id="signoutBtn" class="btn btn-danger" onclick="handleSignoutClick()" style="display: none;">
                BaÄŸlantÄ±yÄ± Kes
            </button>

            <div style="margin-top: 20px; padding: 15px; background: rgba(66, 133, 244, 0.1); border-radius: 10px; text-align: left;">
                <h4>ğŸ›¡ï¸ GÃ¼venlik ve Gizlilik:</h4>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Sadece e-posta baÅŸlÄ±klarÄ±nÄ± ve iÃ§eriklerini okuma izni</li>
                    <li>E-postalar tarayÄ±cÄ±da iÅŸlenir, hiÃ§bir sunucuya gÃ¶nderilmez</li>
                    <li>Gmail API resmi gÃ¼venlik protokollerini kullanÄ±r</li>
                    <li>Ä°stediÄŸiniz zaman baÄŸlantÄ±yÄ± kesebilirsiniz</li>
                </ul>
            </div>
        </div>

        <!-- Filtre AyarlarÄ± -->
        <div class="section">
            <h2>âš™ï¸ Filtre AyarlarÄ±</h2>

            <div class="controls">
                <div class="control-group">
                    <label>Analiz Edilecek E-posta SayÄ±sÄ±</label>
                    <label for="emailCount"></label><select id="emailCount">
                        <option value="10">Son 10 e-posta</option>
                        <option value="25" selected>Son 25 e-posta</option>
                        <option value="50">Son 50 e-posta</option>
                        <option value="100">Son 100 e-posta</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Minimum GÃ¼ven Skoru (%)</label>
                    <label for="confidenceThreshold"></label><input type="number" id="confidenceThreshold" value="70" min="50" max="100">
                </div>

                <div class="control-group">
                    <label>Otomatik Ä°ÅŸlem</label>
                    <label for="autoAction"></label><select id="autoAction">
                        <option value="none" selected>Sadece Tespit Et</option>
                        <option value="label">Etiket Ekle</option>
                        <option value="archive">ArÅŸivle</option>
                        <option value="delete">Ã‡Ã¶p Kutusuna TaÅŸÄ±</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Arama Sorgusu (Gmail tarzÄ±)</label>
                    <label for="searchQuery"></label><input type="text" id="searchQuery" placeholder="from:hr OR subject:baÅŸvuru" value="subject:(baÅŸvuru OR application OR iÅŸ)">
                </div>
            </div>

            <div style="text-align: center;">
                <button id="scanBtn" class="btn" onclick="scanEmails()" disabled>
                    <span id="scanBtnText">E-postalarÄ± Tara</span>
                    <span id="scanLoader" class="loading" style="display: none;"></span>
                </button>
            </div>
        </div>

        <!-- E-posta Listesi -->
        <div class="section">
            <h2>ğŸ“¬ Analiz SonuÃ§larÄ±</h2>

            <div style="margin-bottom: 15px;">
                <div id="scanProgress" class="progress-bar" style="display: none;">
                    <div id="scanProgressFill" class="progress-fill" style="width: 0"></div>
                </div>
                <div id="scanStatus" style="text-align: center; color: #7f8c8d;"></div>
            </div>

            <div id="emailList" class="email-list">
                <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                    <h3>ğŸ“­ HenÃ¼z analiz yapÄ±lmadÄ±</h3>
                    <p>Gmail hesabÄ±nÄ±za baÄŸlanÄ±n ve e-postalarÄ±nÄ±zÄ± tarayÄ±n</p>
                </div>
            </div>
        </div>

        <!-- Ä°statistikler -->
        <div class="section">
            <h2>ğŸ“Š Tarama Ä°statistikleri</h2>

            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalEmails">0</div>
                    <div class="stat-label">Taranan E-posta</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="rejectionEmails">0</div>
                    <div class="stat-label">Tespit Edilen Ret</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="averageConfidence">0%</div>
                    <div class="stat-label">Ortalama GÃ¼ven</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="lastScan">-</div>
                    <div class="stat-label">Son Tarama</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Gmail API -->
<script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
<script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
<script src="script.js"></script>
</body>
</html>